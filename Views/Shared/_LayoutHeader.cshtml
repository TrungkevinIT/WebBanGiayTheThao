@{
    var username = Context.Session.GetString("Username");
    var vaiTro = Context.Session.GetInt32("VaiTro");
}

<nav class="fixed top-0 w-full z-50 liquid-glass transition-all duration-300">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
        <a href="/" class="text-2xl font-bold tracking-tighter">
            SHOES<span class="text-gray-400">STORE</span>
        </a>

        <div class="hidden md:flex space-x-8 font-medium text-sm uppercase tracking-wide">
            <a asp-controller="Home" asp-action="Index" class="hover:text-gray-500 transition">Trang chủ</a>
            <a asp-controller="SanPham" asp-action="Index" class="hover:text-gray-500 transition">Sản Phẩm</a>
        </div>

        <div class="flex items-center space-x-4">

            <a asp-controller="GioHang" asp-action="Index"
               class="relative p-2 hover:bg-gray-200 rounded-full transition">
                <i class="ph ph-shopping-cart text-xl"></i>
                <span class="absolute top-0 right-0 h-4 w-4 bg-black text-white text-[10px]
                             flex items-center justify-center rounded-full">0</span>
            </a>

            @* ===== CHƯA ĐĂNG NHẬP ===== *@
            @if (string.IsNullOrEmpty(username))
            {
                <a href="#"
                   data-bs-toggle="modal"
                   data-bs-target="#loginModal"
                   class="hidden md:block px-5 py-2 text-sm font-semibold rounded-full
                              border border-gray-300 hover:bg-black hover:text-white transition">
                    Đăng nhập
                </a>

                <a href="#"
                   data-bs-toggle="modal"
                   data-bs-target="#registerModal"
                   class="hidden md:block px-5 py-2 text-sm font-semibold rounded-full
                              border border-gray-300 hover:bg-black hover:text-white transition">
                    Đăng ký
                </a>
            }
            else if (vaiTro == 0)
            {
                @* ===== ĐÃ ĐĂNG NHẬP – KHÁCH HÀNG ===== *@

                <!-- Xin chào -->
                <span class="hidden md:block text-sm font-semibold">
                    Xin chào, @username !
                </span>

                <!-- Đăng xuất -->
                <a asp-controller="NguoiDung"
                   asp-action="DangXuat"
                   class="hidden md:block px-5 py-2 text-sm font-semibold rounded-full
                              border border-gray-300 text-red-600 hover:bg-red-600 hover:text-white transition">
                    Đăng xuất
                </a>

                <!-- Menu 3 gạch -->
                <div class="relative dropdown">
                    <button class="p-2 border rounded-full hover:bg-gray-100 transition"
                            data-bs-toggle="dropdown">
                        <i class="ph ph-list text-xl"></i>
                    </button>

                    <ul class="dropdown-menu dropdown-menu-end shadow rounded-3 p-2">
                        <li>
                            <a class="dropdown-item"
                               asp-controller="DonHang"
                               asp-action="LichSu">
                                Lịch sử đơn hàng
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item"
                               asp-controller="NguoiDung"
                               asp-action="ThongTin">
                                Cập nhật thông tin tài khoản
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item"
                               asp-controller="NguoiDung"
                               asp-action="DoiMatKhau">
                                Cập nhật mật khẩu
                            </a>
                        </li>
                    </ul>
                </div>
            }

        </div>
    </div>
</nav>
