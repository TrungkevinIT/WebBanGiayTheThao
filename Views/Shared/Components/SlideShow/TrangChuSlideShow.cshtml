@model IEnumerable<WebBanGiayTheThao.Models.SlideShow>


<header class="relative w-full h-[600px] overflow-hidden flex items-center justify-center -mt-6">
    <div id="slider-container" class="absolute inset-0 w-full h-full">
    </div>

    <div class="relative z-10 text-center px-4">
        <h1 class="text-5xl md:text-7xl font-bold mb-4 drop-shadow-lg text-white">
            JUST DO IT.
        </h1>
        <p class="text-xl text-gray-200 mb-8 font-light">Bộ sưu tập 2026</p>

        <a id="hero-btn" href=""
           class="px-8 py-3 bg-black text-white border border-black rounded-full font-bold hover:bg-white hover:text-black transition transform hover:scale-105 shadow-lg">
            XEM SẢN PHẨM
        </a>
    </div>
    <div class="absolute bottom-0 w-full h-32 bg-gradient-to-t from-gray-50 to-transparent z-0"></div>
</header>

<script>

    const slideData=@Html.Raw(Json.Serialize(Model.Select(s => new { img = "/img/slideshow/" + s.HinhAnh, link = s.Link ?? "#", alt = "Banner quảng cáo" })));
    document.addEventListener("DOMContentLoaded", function() {
        let currentSlide = 0;
        const sliderContainer = document.getElementById('slider-container');
        const heroBtn = document.getElementById('hero-btn');

        function initSlider() {
            if(!sliderContainer) return;
            sliderContainer.innerHTML = '';

            // Kiểm tra nếu không có dữ liệu thì dừng
            if (!slideData || slideData.length === 0) return;

            slideData.forEach((slide, index) => {
                const imgEl = document.createElement('img');
                imgEl.src = slide.img;
                imgEl.alt = slide.alt;
                // Giữ nguyên hiệu ứng chuyển cảnh của bạn
                imgEl.className = `absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${index === 0 ? 'opacity-100' : 'opacity-0'}`;
                imgEl.id = `slide-${index}`;
                sliderContainer.appendChild(imgEl);
            });

            // Cập nhật link nút bấm ban đầu
            if(heroBtn && slideData.length > 0) heroBtn.href = slideData[0].link;
        }

        function nextSlide() {
            if(!sliderContainer || slideData.length === 0) return;

            const currentEl = document.getElementById(`slide-${currentSlide}`);
            if(currentEl) {
                currentEl.classList.remove('opacity-100');
                currentEl.classList.add('opacity-0');
            }

            currentSlide = (currentSlide + 1) % slideData.length;

            const nextEl = document.getElementById(`slide-${currentSlide}`);
            if(nextEl) {
                nextEl.classList.remove('opacity-0');
                nextEl.classList.add('opacity-100');
            }
            if(heroBtn) heroBtn.href = slideData[currentSlide].link;
        }

        initSlider();

        // Chỉ chạy tự động nếu có nhiều hơn 1 ảnh
        if(slideData.length > 1) {
            setInterval(nextSlide, 3000);
        }
    });
</script>